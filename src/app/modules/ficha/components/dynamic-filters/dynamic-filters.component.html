<div class="dynamic-filters" *ngIf="tarjetaJson">
  <h1>Filtros Dinámicos</h1>

  <form [formGroup]="filtrosForm">
    <div class="form-group">
      <label for="tipoTarjeta">Nombre de la tarjeta</label>
      <select id="tipoTarjeta" formControlName="tipoTarjeta">
        <option value="">Seleccione</option>
        <option value="grupalData">
          {{ tarjetaJson.grupalNombre }}
        </option>
        <option value="individualData">
          {{ tarjetaJson.individualNombre }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="grupo">Grupo</label>
      <select id="grupo" formControlName="grupo">
        <option value="">Seleccione</option>
        <option *ngFor="let grupo of grupos" [value]="grupo.title">
          {{ grupo.title }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="pregunta">Pregunta</label>
      <select id="pregunta" formControlName="pregunta">
        <option value="">Seleccione</option>
        <option
          *ngFor="
            let value of obtenerPreguntas(filtrosForm.get('grupo')?.value)
          "
          [value]="value.label"
        >
          {{ value.label }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="condicion">Condición</label>
      <select id="condicion" formControlName="condicion">
        <option value="">Seleccione</option>
        <option
          *ngFor="let condicion of condiciones"
          [value]="condicion.condition"
        >
          {{ condicion.text }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="valor">Valor</label>
      <input id="valor" type="text" formControlName="valor" />
    </div>

    <button type="button" (click)="agregarFiltro()" class="btn btn-primary">
      Agregar Filtro
    </button>
  </form>
  <table class="table table-hover">
    <thead>
      <tr>
        <th style="width: 12%">Opciones</th>
        <th style="width: 22%">Tipo de tarjeta</th>
        <th style="width: 22%">Grupo</th>
        <th style="width: 22%">Pregunta</th>
        <th style="width: 22%">Condici&oacute;n</th>
        <th style="width: 22%">Valor</th>
      </tr>
    </thead>
    <tbody *ngIf="filtros.length > 0">
      <tr *ngFor="let filtro of filtros; let i = index">
        <td>
          <button
            type="button"
            (click)="eliminarFiltro(i)"
            class="btn btn-danger"
          >
            Eliminar Filtro
          </button>
        </td>
        <td>
          {{ filtro.tipoTarjeta }}
        </td>
        <td>
          {{ filtro.grupo }}
        </td>
        <td>
          {{ filtro.pregunta }}
        </td>
        <td>
          {{ verCondicion(filtro.condicion) }}
        </td>
        <td>
          {{ filtro.valor }}
        </td>
      </tr>
    </tbody>
  </table>
</div>
